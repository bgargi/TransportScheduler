    <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.15.1">
    <title>NetworkConstructor â€“ TransportScheduler v0.1.0</title>
    <link rel="stylesheet" href="dist/app-af302bfcc4.css" />
    
    <script src="dist/sidebar_items-af38e2bac4.js"></script>
  </head>
  <body data-type="modules">
    <script>try { if(localStorage.getItem('night-mode')) document.body.className += ' night-mode'; } catch (e) { }</script>

    <div class="main">
<button class="sidebar-toggle">
  <i class="icon-menu"></i>
</button>
<section class="sidebar">

  
  <a href="TS.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        TransportScheduler
      </h1>
      <h2 class="sidebar-projectVersion">
        v0.1.0
      </h2>
    </div>
    
  </a>

  <div class="sidebar-search">
    <i class="icon-search"></i>
    <input type="text" class="sidebar-searchInput" placeholder="search" autocomplete="off" />
  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    

    
  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">


      <h1>
        <small class="visible-xs">TransportScheduler v0.1.0</small>
        NetworkConstructor
        
        
          <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L1" title="View Source" class="view-source" rel="help">
            <i class="icon-code"></i>
          </a>
        
      </h1>

      
        <section id="moduledoc">
          <p>Module to create registry process for monitoring all station processes and
queries using a Network Constructor. The NC process can be used to add or
remove queries from the active query list and check if a query is active.
It can also be used to maintain a map of station pids, station codes, and
station city names for convenient retrieval.</p>
<p>Uses GenServer.</p>

        </section>
      

      
        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <i class="icon-link"></i>
            </a>
            Summary
          </h1>
          

          
  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#add_query/3">add_query(server, query, conn)</a>
  </div>
  
    <div class="summary-synopsis"><p>Adds a query to active list maintained at NC</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#check_active/2">check_active(server, query)</a>
  </div>
  
    <div class="summary-synopsis"><p>Checks if a query is currently in active list maintained at NC</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create/3">create(server, name, code)</a>
  </div>
  
    <div class="summary-synopsis"><p>Starts a new Station process and adds new pid to registry map using
supervisor. Supervisor is also used to restart crashed process and
update registry map with new pid</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#del_query/2">del_query(server, query)</a>
  </div>
  
    <div class="summary-synopsis"><p>Removes a query from active list maintained at NC</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#lookup_code/2">lookup_code(server, code)</a>
  </div>
  
    <div class="summary-synopsis"><p>Returns station pid and name from registry given the station code</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#lookup_name/2">lookup_name(server, name)</a>
  </div>
  
    <div class="summary-synopsis"><p>Returns station pid and code from registry given the station name</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put_queries/2">put_queries(server, queries)</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#return_queries/1">return_queries(server)</a>
  </div>
  
    <div class="summary-synopsis"><p>Returns active query list maintained at NC</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#send_to_src/3">send_to_src(src, dest, itinerary)</a>
  </div>
  
    <div class="summary-synopsis"><p>Sends a query encoded in itinerary from NC to the source station using
<code class="inline">receive_at_src/3</code> of Station module. The pid of NC and source station
must be known</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#start_link/1">start_link(name)</a>
  </div>
  
    <div class="summary-synopsis"><p>Starts a GenServer NetworkConstructor process linked to the current
process</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#stop/1">stop(server)</a>
  </div>
  
    <div class="summary-synopsis"><p>Stops the NC process with the given reason</p>
</div>
  
</div>

  </div>


          

        </section>
      

      

      
        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <i class="icon-link"></i>
            </a>
            Functions
          </h1>
          <div class="detail" id="add_query/3">
  
  <div class="detail-header">
    <a href="#add_query/3" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">add_query(server, query, conn)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L27" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Adds a query to active list maintained at NC.</p>
<h3>Parameters</h3>
<p>nc_pid</p>
<p>query - in the form of a map %{src_station, dst_station, arrival_time,
end_time}</p>
<p>conn</p>
<h3>Return values</h3>
<p>Returns {:ok}.</p>

  </section>
</div>
<div class="detail" id="check_active/2">
  
  <div class="detail-header">
    <a href="#check_active/2" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">check_active(server, query)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L59" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Checks if a query is currently in active list maintained at NC.</p>
<h3>Parameters</h3>
<p>nc_pid</p>
<p>query - in the form of a map %{src_station, dst_station, arrival_time,
end_time}</p>
<h3>Return values</h3>
<p>Returns {:ok}.</p>

  </section>
</div>
<div class="detail" id="create/3">
  
  <div class="detail-header">
    <a href="#create/3" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">create(server, name, code)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L138" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Starts a new Station process and adds new pid to registry map using
supervisor. Supervisor is also used to restart crashed process and
update registry map with new pid.</p>
<h3>Parameters</h3>
<p>nc_pid</p>
<p>station_name</p>
<p>station_code</p>
<h3>Return values</h3>
<p>Returns {:ok}.</p>

  </section>
</div>
<div class="detail" id="del_query/2">
  
  <div class="detail-header">
    <a href="#del_query/2" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">del_query(server, query)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L43" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Removes a query from active list maintained at NC.</p>
<h3>Parameters</h3>
<p>nc_pid</p>
<p>query - in the form of a map %{src_station, dst_station, arrival_time,
end_time}</p>
<h3>Return values</h3>
<p>Returns {:ok}.</p>

  </section>
</div>
<div class="detail" id="lookup_code/2">
  
  <div class="detail-header">
    <a href="#lookup_code/2" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">lookup_code(server, code)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L185" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Returns station pid and name from registry given the station code.</p>
<h3>Parameters</h3>
<p>nc_pid</p>
<p>station_code</p>
<h3>Return values</h3>
<p>Returns {:reply, {name, pid}, state}.</p>

  </section>
</div>
<div class="detail" id="lookup_name/2">
  
  <div class="detail-header">
    <a href="#lookup_name/2" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">lookup_name(server, name)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L170" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Returns station pid and code from registry given the station name.</p>
<h3>Parameters</h3>
<p>nc_pid</p>
<p>station_name</p>
<h3>Return values</h3>
<p>Returns {:reply, {code, pid}, state}.</p>

  </section>
</div>
<div class="detail" id="put_queries/2">
  
  <div class="detail-header">
    <a href="#put_queries/2" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">put_queries(server, queries)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L77" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="return_queries/1">
  
  <div class="detail-header">
    <a href="#return_queries/1" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">return_queries(server)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L73" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Returns active query list maintained at NC.</p>
<h3>Parameters</h3>
<p>nc_pid</p>
<h3>Return values</h3>
<p>Returns {:reply, queries, state}.</p>

  </section>
</div>
<div class="detail" id="send_to_src/3">
  
  <div class="detail-header">
    <a href="#send_to_src/3" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">send_to_src(src, dest, itinerary)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L207" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Sends a query encoded in itinerary from NC to the source station using
<code class="inline">receive_at_src/3</code> of Station module. The pid of NC and source station
must be known.</p>
<h3>Parameters</h3>
<p>nc_pid</p>
<p>src_stn_pid</p>
<p>itinerary - in the form of a map %{vehicleID, src_station, dst_station,
dept_time, arrival_time, mode_of_transport}</p>
<h3>Return values</h3>
<p>Returns {:ok}</p>

  </section>
</div>
<div class="detail" id="start_link/1">
  
  <div class="detail-header">
    <a href="#start_link/1" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">start_link(name)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L119" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Starts a GenServer NetworkConstructor process linked to the current
process.</p>
<p>This is often used to start the GenServer as part of a supervision tree.</p>
<p>Once the server is started, the <code class="inline">init/1</code> function of the given module
is called with args as its arguments to initialize the server.</p>
<h3>Parameters</h3>
<p>module</p>
<p>args</p>
<p>options:</p>
<ul>
<li>:name - used for name registration
</li>
<li>:timeout - if present, the server is allowed to spend the given
amount of milliseconds initializing or it will be terminated and the
start function will return {:error, :timeout}
</li>
<li>:debug - if present, the corresponding function in the :sys module
is invoked
</li>
<li>:spawn_opt - if present, its value is passed as options to the
underlying process
</li>
</ul>
<h3>Return values</h3>
<p>If the server is successfully created and initialized, this function
returns {:ok, pid}, where pid is the PID of the server. If a process with
the specified server name already exists, this function returns {:error,
{:already_started, pid}} with the PID of that process.</p>
<p>If the <code class="inline">init/1</code> callback fails with reason, this function returns
{:error, reason}. Otherwise, if it returns {:stop, reason} or :ignore,
the process is terminated and this function returns {:error, reason}
or :ignore, respectively.</p>

  </section>
</div>
<div class="detail" id="stop/1">
  
  <div class="detail-header">
    <a href="#stop/1" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">stop(server)</span>
    
      <a href="https://github.com/prasadtalasila/TransportScheduler/blob/master/lib/ts/network_constructor.ex#L153" class="view-source" rel="help" title="View Source">
       <i class="icon-code"></i>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Stops the NC process with the given reason.</p>
<h3>Parameters</h3>
<p>nc_pid</p>
<h3>Return values</h3>
<p>The <code class="inline">terminate/2</code> callback of the given server will be invoked before
exiting. This function returns :ok if the server terminates with the
given reason; if it terminates with another reason, the call exits.</p>

  </section>
</div>

        </section>
      

      
          <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.15.1),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle" />
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-e9767fa739.js"></script>
  </body>
</html>

